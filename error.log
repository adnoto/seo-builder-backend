D:\AISEOBuilder\seo-builder-backend>php artisan test --filter=RoleTest

   FAIL  Tests\Feature\RoleTest
  ✓ can assign role to user                                                                                      1.38s
  ⨯ role middleware protects route                                                                               0.07s
  ⨯ policy denies unauthorized access                                                                            0.04s
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   FAILED  Tests\Feature\RoleTest > role middleware protects route
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

Error: Call to undefined method App\Http\Controllers\Api\PageController::middleware() in D:\AISEOBuilder\seo-builder-backend\app\Http\Controllers\Api\PageController.php:17
Stack trace:
#0 [internal function]: App\Http\Controllers\Api\PageController->__construct(Object(App\Services\BuilderService))
#1 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(1004): ReflectionClass->newInstanceArgs(Array)
#2 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(832): Illuminate\Container\Container->build('App\\Http\\Contro...')
#3 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#4 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(763): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#5 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#6 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(285): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#7 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(267): Illuminate\Routing\Route->getController()
#8 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(212): Illuminate\Routing\Route->runController()
#9 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(808): Illuminate\Routing\Route->run()
#10 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(170): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#11 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(51): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#13 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(64): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#14 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#15 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(127): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(807): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#17 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(786): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#18 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(750): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#19 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(739): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#20 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(201): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#21 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(170): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#22 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(110): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(62): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(127): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(176): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#40 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(145): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#41 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#42 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/projects/1...', Array, Array, Array, Array, '{"page_type":"s...')
#43 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/projects/1...', Array, Array, 0)
#44 D:\AISEOBuilder\seo-builder-backend\tests\Feature\RoleTest.php(43): Illuminate\Foundation\Testing\TestCase->postJson('/api/projects/1...', Array)
#45 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\RoleTest->test_role_middleware_protects_route()
#46 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#47 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#48 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\RoleTest))
#49 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#50 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#53 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#54 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#55 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Http\Controllers\Api\PageController::middleware()

  at tests\Feature\RoleTest.php:48
     44▕                 'page_type' => 'standard',
     45▕                 'slug' => 'test-page',
     46▕                 'title' => 'Test Page'
     47▕             ]);
  ➜  48▕         $response->assertStatus(201);
     49▕
     50▕         $response = $this->actingAs($viewerUser, 'sanctum')
     51▕             ->postJson('/api/projects/1/pages', [
     52▕                 'page_type' => 'standard',

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   FAILED  Tests\Feature\RoleTest > policy denies unauthorized access
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Error: Call to undefined method App\Http\Controllers\Api\ProjectController::middleware() in D:\AISEOBuilder\seo-builder-backend\app\Http\Controllers\Api\ProjectController.php:14
Stack trace:
#0 [internal function]: App\Http\Controllers\Api\ProjectController->__construct()
#1 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(1004): ReflectionClass->newInstanceArgs(Array)
#2 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(832): Illuminate\Container\Container->build('App\\Http\\Contro...')
#3 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#4 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Container\Container.php(763): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#5 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#6 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(285): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#7 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(267): Illuminate\Routing\Route->getController()
#8 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Route.php(212): Illuminate\Routing\Route->runController()
#9 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(808): Illuminate\Routing\Route->run()
#10 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(170): Illuminate\Routing\Router->Illuminate\Routing\{closure}(Object(Illuminate\Http\Request))
#11 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Middleware\SubstituteBindings.php(51): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#12 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#13 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Auth\Middleware\Authenticate.php(64): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#14 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#15 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(127): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#16 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(807): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#17 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(786): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#18 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(750): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#19 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Routing\Router.php(739): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#20 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(201): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#21 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(170): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
#22 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#23 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#24 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#26 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#28 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#29 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(110): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#31 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(62): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#33 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(58): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#35 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#37 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(209): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(127): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
#39 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(176): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#40 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(145): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#41 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#42 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/projects/1', Array, Array, Array, Array, '[]')
#43 D:\AISEOBuilder\seo-builder-backend\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/projects/1', Array, Array, 0)
#44 D:\AISEOBuilder\seo-builder-backend\tests\Feature\RoleTest.php(70): Illuminate\Foundation\Testing\TestCase->getJson('/api/projects/1')
#45 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(1657): Tests\Feature\RoleTest->test_policy_denies_unauthorized_access()
#46 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#47 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestRunner\TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#48 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\RoleTest))
#49 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#50 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#51 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\Framework\TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#52 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#53 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\src\TextUI\Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#54 D:\AISEOBuilder\seo-builder-backend\vendor\phpunit\phpunit\phpunit(104): PHPUnit\TextUI\Application->run(Array)
#55 {main}

----------------------------------------------------------------------------------

Call to undefined method App\Http\Controllers\Api\ProjectController::middleware()

  at tests\Feature\RoleTest.php:71
     67▕         $project = Project::factory()->create(['user_id' => $ownerUser->id]);
     68▕
     69▕         $response = $this->actingAs($ownerUser, 'sanctum')
     70▕             ->getJson("/api/projects/{$project->id}");
  ➜  71▕         $response->assertStatus(200);
     72▕
     73▕         $response = $this->actingAs($viewerUser, 'sanctum')
     74▕             ->getJson("/api/projects/{$project->id}");
     75▕         $response->assertStatus(403);


  Tests:    2 failed, 1 passed (4 assertions)
  Duration: 1.58s